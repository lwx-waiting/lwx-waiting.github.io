(this["webpackJsonpwait-how-long"]=this["webpackJsonpwait-how-long"]||[]).push([[0],{36:function(e,a,t){e.exports=t(66)},41:function(e,a,t){},42:function(e,a,t){},43:function(e,a,t){},44:function(e,a,t){},45:function(e,a,t){},46:function(e,a,t){},47:function(e,a,t){},58:function(e,a,t){},59:function(e,a,t){},60:function(e,a,t){},61:function(e,a,t){},63:function(e,a,t){},64:function(e,a,t){},66:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(32),o=t.n(c),l=(t(41),t(12)),s=t(2),u=t(4),i=(t(42),t(13)),m=(t(43),function(e){var a=e.label,t=Object(i.a)(e,["label"]);return r.a.createElement("label",{className:"input-text__label"},r.a.createElement("span",{className:"input-text__label--text"},a),r.a.createElement("input",Object.assign({className:"input-text__input"},t)))}),p=(t(44),function(e){var a=e.children,t=Object(i.a)(e,["children"]);return r.a.createElement("button",Object.assign({className:"btn"},t),a)}),h=t(20),d=t(5),f=function(e){return function(a){var t=a.target,n=t.name,r=t.value;e((function(e){return Object(d.a)(Object(d.a)({},e),{},Object(h.a)({},n,r))}))}},E=function(e){var a=e.history,t=Object(n.useState)({search:""}),c=Object(u.a)(t,2),o=c[0],l=c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"homepage-hero"},r.a.createElement("h1",null,"WAIT HOW LONG")),r.a.createElement("div",{className:"search-container"},r.a.createElement("h3",null,"Homepage"),r.a.createElement(m,{type:"text",label:"Shop name",name:"search",placeholder:"Search for a shop",value:o.search,onChange:f(l)}),r.a.createElement(p,{onClick:function(){return a.push("/search/".concat(o.search))}},"Search")))},b=(t(45),t(46),t(47),t(33)),g=t.n(b),v=t(34),w=t.n(v),O=function(e){var a=e.shop;return r.a.createElement("div",{className:"shop-card"},r.a.createElement("h3",null,a.name),r.a.createElement("p",null,a.description),r.a.createElement("p",null,a.address),r.a.createElement("span",{className:"shop-card__sub"},r.a.createElement(g.a,null)," in queue ",r.a.createElement("span",{className:"shop-card__queue shop-card__green"},a.queue?a.queue:"unknown")),r.a.createElement("span",{className:"shop-card__sub"},r.a.createElement(w.a,null)," waiting time ",r.a.createElement("span",{className:"shop-card__total-wait-time shop-card__blue"},a.queue*a.averageWaitTime?a.queue*a.averageWaitTime:"unknown")))},j=t(16),N=t(14),_=t.n(N);t(52),t(56);_.a.initializeApp({apiKey:"AIzaSyCPrQ0uQOF44JbJFeoxW0z5BCS5vz5bOcY",authDomain:"wait-how-long.firebaseapp.com",databaseURL:"https://wait-how-long.firebaseio.com",projectId:"wait-how-long",storageBucket:"wait-how-long.appspot.com",messagingSenderId:"791285727567",appId:"1:791285727567:web:6a1a7aabf85640bc1c053a",measurementId:"G-E9EJ7BP9KY"});_.a.auth();var S=_.a.firestore(),x=new _.a.auth.GoogleAuthProvider;x.setCustomParameters({prompt:"select_account"});var y=_.a,C=function(e){var a=e.keyword,t=e.results,c=Object(n.useState)({shops:[]}),o=Object(u.a)(c,2),l=o[0],s=o[1];return Object(n.useEffect)((function(){console.log(t),t.forEach((function(e){!function(e){return function(a){return S.collection("shops").doc(a).onSnapshot((function(a){var t=Object(d.a)({id:a.id},a.data());e((function(e){var a;return a=e.shops.find((function(e){return e.id===t.id}))?e.shops.map((function(e){return e.id===t.id?t:e})):[].concat(Object(j.a)(e.shops),[t]),Object(d.a)(Object(d.a)({},e),{},{shops:Object(j.a)(a)})}))}))}}(s)(e.id)}))}),[t]),r.a.createElement("div",null,r.a.createElement("div",{className:"search-results-hero"},r.a.createElement("h3",null,a)),t.length?r.a.createElement("div",{className:"search-results-container"},l.shops.map((function(e){return r.a.createElement(O,{shop:e,key:e.id})}))):r.a.createElement("div",null,"No shops found, try with a different search term."))},P=(t(58),function(){return r.a.createElement("div",{className:"spinner-container"},r.a.createElement("div",{className:"spinner"}))}),k=function(e){var a=e.match.params.keyword,t=Object(n.useState)([]),c=Object(u.a)(t,2),o=c[0],l=c[1],s=Object(n.useState)(!0),i=Object(u.a)(s,2),m=i[0],p=i[1];Object(n.useEffect)((function(){S.collection("shops").get().then((function(e){var a=[];e.forEach((function(e){var t=Object(d.a)({id:e.id},e.data());a.push(t)})),l(a),p(!1)})).catch((function(e){return console.log("error --\x3e",e)}))}),[]);return m?r.a.createElement(P,null):r.a.createElement(C,{keyword:a,results:o.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())}))})},L=(t(59),t(60),function(e){var a=e.label,t=Object(i.a)(e,["label"]);return r.a.createElement("label",{className:"input-textarea__label"},r.a.createElement("span",{className:"input-textarea__label--text"},a),r.a.createElement("textarea",Object.assign({className:"input-textarea__input"},t)))}),W=function(e){var a=e.history,t=Object(n.useState)({name:"",address:"",description:""}),c=Object(u.a)(t,2),o=c[0],l=c[1],s=function(e){var t;e.preventDefault(),console.log("Submitting:",o),(t=o,y.auth().currentUser?S.collection("shops").add({name:t.name,description:t.description,address:t.address,queue:10,averageWaitTime:3,uid:y.auth().currentUser.uid}):new Promise((function(e,a){a("Not logged in!")}))).then((function(e){a.push("/")})).catch((function(e){return console.log("error --\x3e",e)}))};return r.a.createElement("div",null,r.a.createElement("form",{className:"search-form",onSubmit:s},r.a.createElement("h3",null,"TELL US MORE ABOUT YOUR SHOP"),r.a.createElement(m,{label:"Shop name",name:"name",onChange:f(l),value:o.name,type:"text",maxLength:"50"}),r.a.createElement(m,{label:"Shop Address",name:"address",onChange:f(l),value:o.address,type:"text",maxLength:"100"}),r.a.createElement(L,{label:"Shop Description",name:"description",onChange:f(l),value:o.description,maxLength:"200"}),r.a.createElement(p,{onClick:s},"Submit")))},A=(t(61),function(){var e=Object(n.useState)(!1),a=Object(u.a)(e,2),t=a[0],c=a[1];return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"nav-logo-box"},r.a.createElement(l.b,{to:"/"},"WAIT HOW LONG")),r.a.createElement("ul",{className:t?null:"navbar-toggle"},r.a.createElement("li",null,r.a.createElement(l.b,{to:"/login"},"Login")),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/signup"},"Sign Up")),r.a.createElement("li",null,r.a.createElement(l.b,{to:"/shop/new"},"New shop"))),r.a.createElement("div",{className:"navbar-menu",onClick:function(){c((function(e){return!e}))}},r.a.createElement("span",{className:t?"navbar-menu__line navbar-menu__cross":"navbar-menu__line"})))}),I=(t(63),function(e){var a=e.history,t=Object(n.useState)({email:"",password:""}),c=Object(u.a)(t,2),o=c[0],l=c[1],s=function(e){e.preventDefault(),function(e){var a=e.email,t=e.password;return y.auth().signInWithEmailAndPassword(a,t)}({email:o.email,password:o.password}).then((function(e){a.push("/")})).catch((function(e){return console.log("error --\x3e",e)}))};return r.a.createElement("div",null,r.a.createElement("form",{className:"login-form",onSubmit:s},r.a.createElement(m,{type:"email",name:"email",label:"Email",value:o.email,onChange:f(l)}),r.a.createElement(m,{type:"password",name:"password",label:"Password",value:o.password,onChange:f(l)}),r.a.createElement("div",{className:"login-form__buttons"},r.a.createElement(p,{onClick:s},"Login"),r.a.createElement(p,{onClick:function(e){var t=y.auth(),n=new y.auth.GoogleAuthProvider;n.setCustomParameters({prompt:"select_account"}),t.signInWithPopup(n).then((function(e){a.push("/")})).catch((function(e){return console.log("error --\x3e",e)}))}},"Login With Google"))))}),U=(t(64),function(e){var a=e.history,t="Passwords do not match!",c=Object(n.useState)({email:"",password:"",confirmPassword:"",errors:[]}),o=Object(u.a)(c,2),l=o[0],s=o[1];return r.a.createElement("div",null,r.a.createElement("form",{className:"signup-form",onSubmit:function(e){e.preventDefault(),l.password!==l.confirmPassword?l.errors.includes(t)||s((function(e){return Object(d.a)(Object(d.a)({},e),{},{errors:[].concat(Object(j.a)(e.errors),[t])})})):(s((function(e){return Object(d.a)(Object(d.a)({},e),{},{errors:e.errors.filter((function(e){return e!==t}))})})),function(e){var a=e.email,t=e.password;return y.auth().createUserWithEmailAndPassword(a,t)}({email:l.email,password:l.password}).then((function(e){a.push("/")})).catch((function(e){return console.log("error --\x3e",e)})))}},r.a.createElement("h3",null,"Sign up"),l.errors.length>0&&l.errors.map((function(e){return r.a.createElement("div",{key:e,className:"signup-form-error"},e)})),r.a.createElement(m,{type:"email",name:"email",label:"Email",value:l.email,onChange:f(s)}),r.a.createElement(m,{type:"password",name:"password",label:"Password",value:l.password,onChange:f(s)}),r.a.createElement(m,{type:"password",name:"confirmPassword",label:"Confirm Password",value:l.confirmPassword,onChange:f(s)}),r.a.createElement(p,null,"Sign Up")))}),q=function(){return Object(n.useEffect)((function(){y.auth().onAuthStateChanged((function(e){console.log("auth state changed!",e),e?console.log("Logged in"):console.log("Not logged in")}))}),[]),r.a.createElement(l.a,null,r.a.createElement(A,null),r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/search/:keyword",component:k}),r.a.createElement(s.a,{path:"/shop/new",component:W}),r.a.createElement(s.a,{path:"/login",component:I}),r.a.createElement(s.a,{path:"/signup",component:U}),r.a.createElement(s.a,{path:"/",component:E})))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(q,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.66122f3e.chunk.js.map